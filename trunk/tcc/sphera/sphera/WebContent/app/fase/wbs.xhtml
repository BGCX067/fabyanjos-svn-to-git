<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:chart="http://sourceforge.net/projects/jsf-comp">

<ui:composition>
	<h:form id="act">

		<h:commandLink value="#{i18n.addTask}"
			action="#{tarefaController.novaTarefa}">
			<f:setPropertyActionListener value="#{faseController.fase}"
				target="#{tarefaController.tarefa.fase}" />
		</h:commandLink>
		<rich:separator height="8" />
		<rich:tree switchType="client" value="#{arvoreFase.data}" var="item"
			nodeFace="#{item.type}">
			<rich:treeNode type="fase">
				<h:panelGrid columns="2">
					<h:outputText value="#{item.fase.nome}" />
					<rich:togglePanel switchType="client" id="showValuesFase"
						stateOrder="a,b" styleClass="toggle-no-link">
						<f:facet name="a">
							<rich:toggleControl for="showValuesFase" id="contAFase"
								value="&#187;" switchToState="b" />
						</f:facet>
						<f:facet name="b">
							<h:panelGroup id="detFase">
								<h:outputText id="treeIniPlaFase"
									value="#{item.fase.inicioPlanejado}"
									title="#{i18n.lblIniPlanejado}">
									<f:convertDateTime pattern="#{i18n.datePattern}" />
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText id="treeFimPlaFase"
									value="#{item.fase.fimPlanejado}"
									title="#{i18n.lblFimPlanejado}">
									<f:convertDateTime pattern="#{i18n.datePattern}" />
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText id="treeCustoTotalFase"
									value="#{item.fase.custoPlanejadoTotal}"
									title="#{i18n.lblCustoTotalPlan}">
									<f:convertNumber locale="#{i18n.locale}" type="currency"
										currencySymbol="#{i18n.moeda}"
										maxFractionDigits="#{i18n.digitoFrac}" />
								</h:outputText>
								<h:outputText value=" (" />
								<h:outputText id="custRHValueFase"
									value="#{item.fase.custoPlanejadoRH}"
									title="#{i18n.lblCustoPlanejadoRH}">
									<f:convertNumber locale="#{i18n.locale}" type="currency"
										currencySymbol="#{i18n.moeda}"
										maxFractionDigits="#{i18n.digitoFrac}" />
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText id="custMatValueFase"
									value="#{item.fase.custoPlanejadoMaterial}"
									title="#{i18n.lblCustoPlanejadoMaterial}">
									<f:convertNumber locale="#{i18n.locale}" type="currency"
										currencySymbol="#{i18n.moeda}"
										maxFractionDigits="#{i18n.digitoFrac}" />
								</h:outputText>
								<h:outputText value=")" />
								<rich:toggleControl for="showValuesFase" id="contBFase"
									value="   &#171;" switchToState="a" />
							</h:panelGroup>
						</f:facet>
					</rich:togglePanel>
				</h:panelGrid>
			</rich:treeNode>
			<rich:treeNode type="tarefa">

				<h:panelGrid columns="2">
					<h:outputText value="#{item.tarefa.nome}" />
					<rich:togglePanel switchType="client" id="showValuesTar"
						stateOrder="a,b" styleClass="toggle-no-link">
						<f:facet name="a">
							<rich:toggleControl for="showValuesTar" id="contATar"
								value="&#187;" switchToState="b" />
						</f:facet>
						<f:facet name="b">
							<h:panelGroup id="detTar">
								<h:outputText id="treeIniPlaTar"
									value="#{item.tarefa.inicioPlanejado}"
									title="#{i18n.lblIniPlanejado}">
									<f:convertDateTime pattern="#{i18n.datePattern}" />
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText id="treeFimPlaTar"
									value="#{item.tarefa.fimPlanejado}"
									title="#{i18n.lblFimPlanejado}">
									<f:convertDateTime pattern="#{i18n.datePattern}" />
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText id="treeCustoTotalTar"
									value="#{item.tarefa.custoPlanejadoTotal}"
									title="#{i18n.lblCustoTotalPlan}">
									<f:convertNumber locale="#{i18n.locale}" type="currency"
										currencySymbol="#{i18n.moeda}"
										maxFractionDigits="#{i18n.digitoFrac}" />
								</h:outputText>
								<h:outputText value=" (" />
								<h:outputText id="custRHValueTar"
									value="#{item.tarefa.custoPlanejadoRH}"
									title="#{i18n.lblCustoPlanejadoRH}">
									<f:convertNumber locale="#{i18n.locale}" type="currency"
										currencySymbol="#{i18n.moeda}"
										maxFractionDigits="#{i18n.digitoFrac}" />
								</h:outputText>
								<h:outputText value=" - " />
								<h:outputText id="custMatValueTar"
									value="#{item.tarefa.custoPlanejadoMaterial}"
									title="#{i18n.lblCustoPlanejadoMaterial}">
									<f:convertNumber locale="#{i18n.locale}" type="currency"
										currencySymbol="#{i18n.moeda}"
										maxFractionDigits="#{i18n.digitoFrac}" />
								</h:outputText>
								<h:outputText value=")" />
								<rich:toggleControl for="showValuesTar" id="contBTar"
									value="   &#171;" switchToState="a" />
							</h:panelGroup>
						</f:facet>
					</rich:togglePanel>
				</h:panelGrid>
			</rich:treeNode>
		</rich:tree>

	</h:form>

</ui:composition>

</html>